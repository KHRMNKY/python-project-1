import json 
veri={}
veri["kullanicilar"]=[{"ad":"kahraman","sifre":"jhfdldg834","email":"kaya8876qgmail.com"},{"ad":"bayram","sifre":"jkh987","email":"byrm0987@gmail.com"}]
with open("veri.txt","w") as dosya:
    json.dump(veri,dosya)
class Menu():
    def __init__(self):
        self.Durum=True
        
    
    def Calistir(self):
        print("""
1 = Giriş Yap
2 = Kayıt Ol  
3 = Şifremi unuttum            
              """)
        while True:
            try:
                secim=int(input("lutfen seciminizi giriniz= "))
                break
            except:
                print("lütfen uygun deger gırınız= ")
            
        if secim==1:
            self.Giris()
        elif secim==2:
            self.KayıtOl()
        elif secim==3:
            self.SifremiUnuttum()
    
    
    def Giris(self):
        
        ad=input("ad= ")
        sifree=input("şifre= ")
        
        with open("veri.txt","r") as dosya:
            n=json.load(dosya)
            for m in n["kullanicilar"]:
                if m[ad]==ad and m[sifre]==sifree:
                    print("giriş başarılı..")
                    while True:
                        try:
                            istek=int(input("cıkmak için 1, şifre değiştermek için 2 yi tuşlayınız="))
                            if istek==1:
                                self.Cikis()
                            if istek==2:
                                self.SifreDegistir()
                                break
                        except:
                            print("lütfen uygun değerler giriniz.")
                        
                if ad==ad and sifre!=şifre:
                    print("şifrenizi yanlış girdiniz..")
                if ad!=ad and sifre!=şifre:
                    print("kaydınız bulunmamaktadır..")
                    self.KayıtOl()
                
    def KayıtOl(self):
        self.Kullanıcıİsmi=input("kullanıcı isminizi giriniz= ")
        self.KullanıcıSifresi=input("kullanıcı şifrenizi giriniz= ")
        self.kullanıcıGmail=input(("kullanıcı e-mailinizi giriniz= "))
        bilgi={self.Kullanıcıİsmi,self.KullanıcıSifresi,self.kullanıcıGmail}
        veri["kullanicilar"].append(bilgi)
        with open("veri.txt","w") as dosya:
            json.dump(veri,dosya)
        print("kullanıcı kaydedildi..")
        self.Giris()
            
            
            
    def SifremiUnuttum(self):
        pass
    

    
    def SifreDegistir(self):
        adınız=input("adınızı giriniz= ")
        with open("veri.txt","r") as dosya:
            k=json.load(dosya)
            for m in veri["kullanicilar"]:
                if m["ad"]==adınız:
                    m[sifre]=input("yeni şifrenizi giriniz= ")
                    print("şireniz başarıyla değiştirildi..")    
        
    
    def Cikis(self):
        self.Durum=False
    
    
menu=Menu()
while menu.Durum:
    menu.Calistir()
    
